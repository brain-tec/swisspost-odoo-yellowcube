<?xml version="1.0" encoding="utf-8"?>

<openerp>
	<data>       
        <record model="ir.ui.view" id="extended_account_voucher_payment_form_view">
            <field name="name">Extended Form View For Account Voucher Payment</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
            <field name="arch" type="xml">
            <data>
                <xpath expr="/form/sheet/notebook/page/group/group/group/field[@name='comment']" position="before">
                    <field name="open_amount_invoice" attrs="{'invisible':[('state','!=','draft')]}"/>
                    <field name="payment_difference_id" widget="selection" attrs="{'invisible':[('payment_option','!=','with_writeoff')]}"/>
                </xpath>
                <xpath expr="/form/sheet/notebook/page/field/tree/field[@name='amount']" position="after">
                    <field name="skonto"/>
                </xpath>
                <xpath expr="/form/header/field[@name='state']" position="after">
                    <button name="refresh_voucher" string="Reload" states="draft,proforma"/>
                </xpath>
            </data>
            </field>
        </record>
        
        <record model="ir.ui.view" id="extended_account_voucher_receipt_form_view">
            <field name="name">Extended Form View For Account Voucher Receipt</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
            <field name="arch" type="xml">
            <data>
                <xpath expr="/form/sheet/notebook/page/group/group/field[@name='comment']" position="before">
                    <field name="open_amount_invoice" attrs="{'invisible':[('state','!=','draft')]}"/>
                    <field name="payment_difference_id" widget="selection" attrs="{'invisible':[('payment_option','!=','with_writeoff')]}"/>
                </xpath>
                <xpath expr="/form/sheet/notebook/page/field/tree/field[@name='amount']" position="after">
                    <field name="skonto"/>
                </xpath>
                <xpath expr="/form/header/field[@name='state']" position="after">
                    <button name="refresh_voucher" string="Reload" states="draft,proforma"/>
                </xpath>
            </data>
            </field>
        </record>
        
        <record model="ir.ui.view" id="extended_journal_items_search_view">
            <field name="name">Extended Search View For Journal Items</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_account_move_line_filter"/>
            <field name="arch" type="xml">
            <data>
                <xpath expr="/search/field[@name='period_id']" position="after">
                    <field name="payment_difference_id" widget="selection" context="{'payment_difference_id':self, 'visible_id':self, 'normal_view':False}"/>
                </xpath>
            </data>
            </field>
        </record>
        
        <record model="ir.ui.view" id="view_move_line_tree_ext">
            <field name="name">account.move.line.tree.ext</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree"/>
            <field name="arch" type="xml">
            <data>
                <xpath expr="/tree/field[@name='amount_currency']" position="replace">
                    <field name="amount_currency" readonly="True"/>
                </xpath>
                <xpath expr="/tree/field[@name='currency_id']" position="replace">
                    <field name="currency_id" readonly="True"/>
                    <field name="reconcile_id"/>
                    <field name="reconcile_partial_id"/>
                </xpath>
            </data>
            </field>
        </record>
        
        <record id="view_payment_difference_type_search" model="ir.ui.view">
            <field name="name">payment.difference.type.search</field>
            <field name="model">payment.difference.type</field>
            <field name="arch" type="xml">
                <search string="Payment Difference Type">
                    <field name="name"/>
                </search>
            </field>
        </record>

        <record id="view_payment_mode_tree" model="ir.ui.view">
            <field name="name">payment.difference.type.tree</field>
            <field name="model">payment.difference.type</field>
            <field name="arch" type="xml">
                <tree string="Payment Difference Type">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record id="view_payment_difference_type_form" model="ir.ui.view">
            <field name="name">payment.difference.type.form</field>
            <field name="model">payment.difference.type</field>
            <field name="arch" type="xml">
                <form string="Payment Difference Type">
                    <field name="name" select="1"/>
                </form>
            </field>
        </record>
        <record id="action_payment_difference_type_form" model="ir.actions.act_window">
            <field name="name">Payment Difference Type</field>
            <field name="res_model">payment.difference.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_payment_difference_type_search"/>
        </record>

        <menuitem action="action_payment_difference_type_form" id="menu_action_payment_difference_type_form" parent="account.menu_configuration_misc"/>
        
        <record model="ir.ui.view" id="account_view_company_inherit_1_form_ext">
            <field name="name">account.view_company_inherit_1_form_ext</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form"/>
            <field name="arch" type="xml">
            <data>
                <page string="Configuration" position="inside">
                  <group col="2" colspan="2">
                      <separator string="Payment Difference Accounts" colspan="2"/>
                      <field name="property_currency_difference_account" colspan="2"/>
                      <field name="property_currency_difference_analytic_account" colspan="2"/>
                      <field name="property_rounding_difference_cost_account" colspan="2"/>
                      <field name="property_rounding_difference_profit_account" colspan="2"/>
                  </group>
                </page>
            </data>
            </field>
        </record>

        <record model="ir.ui.view" id="view_bank_statement_form_ext">
            <field name="name">account.bank.statement.form.inherit_ext</field>
            <field name="model">account.bank.statement</field>
            <field name="inherit_id" ref="account.view_bank_statement_form"/>
            <field name="arch" type="xml">
            <data>
                <xpath expr="/form/sheet/notebook/page/field/tree/field[@name='amount']" position="after">
                    <field name="open_amount_invoice"/>
                    <field name="writeoff_amount"/>
                </xpath>
                <xpath expr="/form/sheet/notebook/page/field/tree/field[@name='date']" position="replace">
                    <field name="date" on_change="onchange_date(date)"/>
                </xpath>
                <xpath expr="/form/sheet/notebook/page/field/form/group/field[@name='date']" position="replace">
                    <field name="date" on_change="onchange_date(date)"/>
                </xpath>
                <xpath expr="//field[@name='line_ids']/tree" position="attributes">
                    <attribute name="editable"/>
                </xpath>
            </data>
            </field>
        </record>
        
        <record id="view_bank_statement_form_voucher_1" model="ir.ui.view">
            <field name="name">account.bank.statement.voucher.form.inherit.1</field>
            <field name="model">account.bank.statement</field>
            <field name="priority">17</field>
			<field name="inherit_id" ref="account_voucher.view_bank_statement_form_voucher"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='statement_line_ids']/field[@name='line_ids']/tree/field[@name='voucher_id']" position="replace">
					<field name="voucher_id" string="" widget="many2onebutton" options="{'label':{'create':'Reconcile','edit':'Edit Reconciliation'}}" context="{'line_account_id': account_id,'line_type': type, 'default_type': amount &lt;&gt; 0 and (amount &lt; 0 and 'payment' or 'receipt') or (type=='supplier' and 'payment' or 'receipt'), 'type': amount &lt; 0 and 'payment' or 'receipt', 'default_partner_id': partner_id, 'default_journal_id': parent.journal_id, 'default_amount': abs(amount), 'default_reference': ref, 'default_date': date, 'default_name': name, 'default_period_id': parent.period_id}"/>
                </xpath>
                <xpath expr="//page[@name='statement_line_ids']/field[@name='line_ids']/form/group/field[@name='voucher_id']" position="replace">
                    <field name="voucher_id" widget="many2onebutton" options="{'label':{'create':'Reconcile','edit':'Edit Reconciliation'}}" context="{'line_account_id': account_id, 'line_type': type, 'default_type': amount &lt; 0 and 'payment' or 'receipt', 'type': amount &lt; 0 and 'payment' or 'receipt', 'default_partner_id': partner_id, 'default_journal_id': parent.journal_id, 'default_amount': abs(amount), 'default_reference': ref, 'default_date': date, 'default_name': name, 'default_active': False}"/>
                </xpath>
                <xpath expr="/form/sheet/notebook/page/field/form/group/field[@name='amount']" position="attributes">
                    <attribute name="on_change">onchange_amount(amount)</attribute>
                </xpath>
            </field>
        </record>
        <record id="view_cash_statement_tree_voucher_1" model="ir.ui.view">
            <field name="name">account.cash.statement.voucher.tree.inherit.1</field>
            <field name="model">account.bank.statement</field>
			<field name="priority">17</field>
            <field name="inherit_id" ref="account_voucher.view_cash_statement_tree_voucher"/>
            <field name="arch" type="xml">
                <xpath expr="//page/field[@name='line_ids']/tree/field[@name='voucher_id']" position="replace">
					<field name="voucher_id" context="{'line_account_id': account_id,'line_type': type, 'default_type': amount &lt;&gt; 0 and (amount &lt; 0 and 'payment' or 'receipt') or (type=='supplier' and 'payment' or 'receipt'), 'type': amount &lt; 0 and 'payment' or 'receipt', 'default_partner_id': partner_id, 'default_journal_id': parent.journal_id, 'default_amount': abs(amount), 'default_reference': ref, 'default_date': date, 'default_name': name, 'default_period_id': parent.period_id}"/>
                </xpath>
            </field>
        </record>
		<record id="view_cash_statement_form_voucher_1" model="ir.ui.view">
            <field name="name">account.cash.statement.voucher.form.inherit.1</field>
            <field name="model">account.bank.statement</field>
			<field name="priority">17</field>
            <field name="inherit_id" ref="account_voucher.view_cash_statement_form_voucher"/>
            <field name="arch" type="xml">
                <xpath expr="//page/field[@name='line_ids']/form/group/field[@name='voucher_id']" position="replace">
					<field name="voucher_id" context="{'line_account_id': account_id,'line_type': type, 'default_type': amount &lt;&gt; 0 and (amount &lt; 0 and 'payment' or 'receipt') or (type=='supplier' and 'payment' or 'receipt'), 'type': amount &lt; 0 and 'payment' or 'receipt', 'default_partner_id': partner_id, 'default_journal_id': parent.journal_id, 'default_amount': abs(amount), 'default_reference': ref, 'default_date': date, 'default_name': name, 'default_period_id': parent.period_id}"/>
                </xpath>
            </field>
        </record>
		
		<record id="view_account_form_ext" model="ir.ui.view">
            <field name="name">view_account_form_ext</field>
            <field name="model">account.account</field>
            <field name="inherit_id" ref="account.view_account_form" />
            <field name="arch" type="xml">
                <field name="active" position="after">
                    <field name="requires_analytic_account"/>
                </field>
            </field>
        </record>
        
	</data>
</openerp>


