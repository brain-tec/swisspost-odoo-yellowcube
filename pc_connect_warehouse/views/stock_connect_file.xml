<openerp>
	<data>
        <!-- Search view -->
        <record id="view_stock_connect_file_search" model="ir.ui.view">
            <field name="name">stock.connect.file.search</field>
            <field name="model">stock.connect.file</field>
            <field name="arch" type="xml">
                <search string="Connect File">
                    <field name="name" default_focus="1"/>
                    <field name="type"/>
                    <filter icon="terp-go-home" name="important" string="Under Review" domain="['|',('error','=',True),('state', 'not in', ['done', 'cancel'])]"/>
                    <group expand="1" string="Group By...">
                        <filter name="group_state" string="State" icon="terp-gtk-jump-to-rtl" context="{'group_by':'state'}"/>
                        <filter name="group_type" string="Type" icon="terp-accessories-archiver" context="{'group_by':'type'}"/>
                    </group>
                </search>
            </field>
        </record>

		<!-- Tree view. -->
		<record id="view_stock_connect_file_tree" model="ir.ui.view">
			<field name="name">stock.connect.file.tree</field>
			<field name="model">stock.connect.file</field>
			<field name="priority">9999</field>
			<field name="arch" type="xml">
				<tree string="Connect File" colors="red:error==True;green:state=='done'">
					<field name="priority" />
					<field name="create_date" />
					<field name="name" />
					<field name="warehouse_id" />
					<field name="stock_connect_id" />
					<field name="state" />
					<field name="server_ack" />
					<field name="internal_index" string="int-index"/>
					<field name="type" />
					<field name="input" />
					<field name="error" />
					<field name="model" />
					<field name="res_id" />
				</tree>
			</field>
		</record>

		<!-- Form view. -->
		<record id="view_stock_connect_file_form" model="ir.ui.view">
			<field name="name">stock.connect.file.form</field>
			<field name="model">stock.connect.file</field>
			<field name="priority">9999</field>
			<field name="arch" type="xml">
				<form string="Connect File" version="7.0">
					<group string="Information" colspan="4">
						<field name="name" />
						<field name="warehouse_id" />
						<field name="stock_connect_id" />
						<field name="state" />
						<field name="server_ack" />
						<field name="priority" />
						<field name="internal_index"/>
						<field name="type" />
						<field name="input" />
						<field name="error" />
						<field name="info" />
						<field name="model" />
						<field name="res_id" />
                        <field name="related_ids" />
                        <field name="is_summary" />
                        <field name="summary_file_id" />
					</group>
					<group string="Content" colspan="4">
						<field name="binary_content" colspan="4" />
						<field name="content" nolabel='1' attrs="{'invisible': [('binary_content', '=', True)]}"
							colspan="4" />
						<field name="attachments" context="{'res_id': id, 'res_model': 'stock.connect.file'}" />
					</group>
					<group string="Related Files" colspan="4">
						<field name="parent_file_id" />
						<field name="child_file_ids" />
					</group>
				</form>
			</field>
		</record>

		<!-- Receives the action. -->
		<record id="action_stock_connect_file" model="ir.actions.act_window">
			<field name="name">Warehouse Connection Files</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">stock.connect.file</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
            <field name="context">{'search_default_important': True}</field>
		</record>

        <record
			id="action_reset_file_error"
			model="ir.actions.server">
			<field name="name">Reset Error</field>
			<field
				name="model_id"
				ref="model_stock_connect_file" />
			<field name="state">code</field>
			<field name="code">self.write(cr, uid, context['active_ids'], {'error': False},	context=context)</field>
		</record>
        <record
			model="ir.values"
			id="open_reset_file_error">
			<field name="name">Reset Error</field>
			<field name="key2">client_action_multi</field>
			<field
				name="value"
				eval="'ir.actions.server,' + str(ref('action_reset_file_error'))" />
			<field name="key">action</field>
			<field name="model">stock.connect.file</field>
		</record>
	</data>
</openerp>