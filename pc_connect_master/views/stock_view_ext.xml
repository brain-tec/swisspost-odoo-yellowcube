<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_picking_in_form_ext_2" model="ir.ui.view">
            <field name="name">view_picking_in_form_ext_2</field>
            <field name="model">stock.picking.in</field>
            <field name="inherit_id" ref="stock.view_picking_in_form"/>
            <field name="priority" eval="500" />
            <field name="arch" type="xml">
                <field name="date_done" position="attributes">
                    <attribute name="groups">pc_connect_master.pc_client</attribute>
                </field>
                <field name="date_done" position="after">
                    <field name="yc_mandatory_additional_shipping" />
                </field>
                <button name="action_process" position="attributes">
                    <attribute name="groups">base.group_user</attribute>
                </button>
                <button string="Return Products" position="replace">
                    <button name="%(stock.act_stock_return_picking)d" string="Return Products"
                        states="done" type="action" groups="base.group_user" />
                </button>
            </field>
        </record>

        <record id="view_picking_out_form_ext" model="ir.ui.view">
            <field name="name">view_picking_out_form_ext</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form" />
            <field name="priority" eval="500" />
            <field name="arch" type="xml">
                <field name="date_done" position="attributes">
                    <attribute name="groups">pc_connect_master.pc_client</attribute>
                </field>
                <field name="date_done" position="after">
                    <field name="do_not_send_to_warehouse" />
                    <field name="ready_for_export" />
                    <field name="ready_for_export_manual" groups="pc_connect_master.pc_admin"/>
                    <field name="yc_mandatory_additional_shipping" />
                </field>
                <button name="action_process" position="attributes">
                    <attribute name="groups">base.group_user</attribute>
                </button>
                <button string="Return Products" position="replace">
                    <button name="%(stock.act_stock_return_picking)d" string="Return Products"
                        states="done" type="action" groups="base.group_user" />
                </button>
            </field>
        </record>

        <record model="ir.ui.view" id="search_product_lot_filter_ext">
            <field name="name">Production Lots Filter Ext</field>
            <field name="model">stock.production.lot</field>
            <field name="inherit_id" ref="stock.search_product_lot_filter" />
            <field name="arch" type="xml">

                <filter name="available" position="after">
                    <filter string="Removal Date Reached"
                        domain="['|',
                                 ('removal_date','&lt;=',context_today().strftime('%%Y-%%m-%%d')),
                                 ('removal_date','in',(False,None)),
                                ]"
                        help="Lots with a removal date which is in the past."
                        icon="terp-personal"
                        name="removal_date_filter" />
                        
                    <filter string="Alert Date Reached"
                        domain="['|',
                                 ('alert_date','&lt;=',context_today().strftime('%%Y-%%m-%%d')),
                                 ('alert_date','in',(False,None)),
                                ]"
                        help="Lots with an alert date which is in the past."
                        icon="terp-personal"
                        name="alert_date_filter" />
                </filter>

            </field>
        </record>


		<!-- Adds the fields 'removal date' and 'alert date'. -->
		<record id="view_production_lot_tree_ext" model="ir.ui.view">
			<field name="name">view_production_lot_tree_ext</field>
			<field name="model">stock.production.lot</field>
			<field name="inherit_id" ref="stock.view_production_lot_tree" />
			<field name="arch" type="xml">
				<field name="product_id" position="before">
					<field name="removal_date" />
				</field>
				<field name="removal_date" position="after">
					<field name="alert_date" />
				</field>
			</field>
		</record>

		<record id="view_production_lot_form_ext" model="ir.ui.view">
			<field name="name">stock.production.lot.form.ext</field>
			<field name="model">stock.production.lot</field>
			<field name="inherit_id" ref="stock.view_production_lot_form" />
			<field name="arch" type="xml">
				<field name="name" position="after">
					<button name="action_export_addressees" string="Export Addressees" type="object" />
				</field>
			</field>
		</record>

		<record id="view_order_form_inherit_ext" model="ir.ui.view">
			<field name="name">sale.order.form.sale.stock.ext</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale_stock.view_order_form_inherit" />
			<field name="arch" type="xml">
				<button name="action_view_delivery" position="replace">
					<!-- Makes the button 'View Delivery Order' visible even if it was already delivered. -->
					<button name="action_view_delivery" string="View Delivery Order" type="object" class="oe_highlight"
						attrs="{'invisible': [('picking_ids','in',(False,[]))]}"
						groups="base.group_user,pc_connect_master.pc_client" />
				</button>
			</field>
		</record>

	</data>
</openerp>

