<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

		<record id="view_followup_level_tree" model="ir.ui.view">
			<field name="name">view_followup_level_tree</field>
			<field name="model">followup.level</field>
			<field name="arch" type="xml">
				<tree string="Follow-up Levels">
					<field name="name" />
					<field name="delay" />
					<field name="send_email" />
					<field name="send_letter" />
					<field name="manual_action" />
				</tree>
			</field>
		</record>

		<record id="view_followup_level_form" model="ir.ui.view">
			<field name="name">followup.level.form</field>
			<field name="model">followup.level</field>
			<field name="arch" type="xml">
				<form string="Follow-up Steps" version="7.0">
					<label for="name" class="oe_edit_only" />
					<h1>
						<field name="name" />
					</h1>
					<div class="oe_inline">
						After
						<field name="delay" class="oe_inline" />
						days of overdue, do the following actions:
					</div>
					<div>
						<field name="manual_action" class="oe_inline" />
						<label for="manual_action" />
					</div>
					<div>
						<field name="send_email" class="oe_inline" />
						<label for="send_email" />
					</div>
					<div>
						<field name="send_letter" class="oe_inline" />
						<label for="send_letter" />
					</div>

					<group string="Select Penalization">
						<field name="product_id" />
					</group>

					<group string="Manual Action"
						attrs="{'invisible': [('manual_action', '=', False)]}">
						<field name="manual_action_responsible_id" />
						<field name="manual_action_note"
							attrs="{'required': [('manual_action', '&lt;&gt;', False)]}"
							placeholder="e.g. Call the customer, check if it's paid, ..." />
					</group>

					<group string="Send an Email" attrs="{'invisible': [('send_email', '=', False)]}">
						<field name="email_template_id"
							attrs="{'required': [('send_email', '&lt;&gt;', False)]}" />
					</group>

					<group string="Send a Letter" attrs="{'invisible': [('send_letter', '=', False)]}">
						<p colspan="2" class="oe_grey">
							Write here the introduction in the letter,
							according to the level
							of the follow-up. You can
							use the following keywords in the text.
							Don't
							forget to translate in all languages you installed
							using to
							top right icon.
							<group class="oe_grey">
								<table class="oe_grey">
									<tr>
										<td>
											<b>{num_days}</b>
											:
										</td>
										<td>Number of days to pay the follow-up.</td>
									</tr>
									<tr>
										<td>
											<b>{account_number}</b>
											:
										</td>
										<td>The bank account of the client.</td>
									</tr>
									<tr>
										<td>
											<b>{new_due_date}</b>
											:
										</td>
										<td>The due date to pay the follow-up.</td>
									</tr>
									<tr>
										<td>
											<b>{partner_name}</b>
											:
										</td>
										<td>The name of the partner.</td>
									</tr>
								</table>
							</group>
						</p>
						<field name="description" nolabel="1" colspan="2"
							attrs="{'invisible': [('send_letter', '=', False)]}" />
					</group>
				</form>
			</field>
		</record>

		<record id="view_followup_config_form" model="ir.ui.view">
			<field name="name">followup.config.form</field>
			<field name="model">followup.config</field>
			<field name="arch" type="xml">
				<form string="Follow-up" version="7.0">
					<h1>
						<field name="company_id" widget="selection" class="oe_inline" />
					</h1>
					<p class="oe_grey">
						To remind customers of paying their invoices, you can
						define different actions depending on how severely
						overdue the
						customer is. These actions are bundled
						into follow-up levels that
						are triggered when the due
						date of an invoice has passed a certain
						number of days. If there are other overdue invoices for the
						same
						customer, the actions of the most
						overdue invoice will be executed.
					</p>
					<field name="followup_level" />
				</form>
			</field>
		</record>

		<record id="view_followup_config_tree" model="ir.ui.view">
			<field name="name">followup.config.tree</field>
			<field name="model">followup.config</field>
			<field name="arch" type="xml">
				<tree string="Follow-up">
					<field name="company_id" />
				</tree>
			</field>
		</record>

		<record id="view_followup_config_filter" model="ir.ui.view">
			<field name="name">account.followup.config.select</field>
			<field name="model">followup.config</field>
			<field name="arch" type="xml">
				<search string="Search Follow-up">
					<field name="company_id" groups="base.group_multi_company" />
				</search>
			</field>
		</record>

		<record id="action_followup_config_form" model="ir.actions.act_window">
			<field name="name">Invoice Follow-ups</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">followup.config</field>
			<field name="search_view_id" ref="view_followup_config_filter" />
			<field name="view_type">form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to define follow-up levels and their related
					actions.
				</p>
				<p>
					For each step, specify the actions to be taken and delay in days.
					It is possible to use print and email templates to send specific messages to the customer.
				</p>
			</field>
		</record>

	</data>
</openerp>
